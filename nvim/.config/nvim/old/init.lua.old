-- Helpers
local cmd = vim.cmd
local fn = vim.fn
local g = vim.g
local scopes = {
	o = vim.o,
	b = vim.bo,
	w = vim.wo
}

local function setopt(scope, key, value)
	scopes[scope][key] = value
	if scope ~= 'o' then scopes['o'][key] = value end
end

local function map(mode, keys, command, options)
	local options = {noremap = true}
	if opts then options = vim.tbl_extend('force', options, opts) end
	vim.api.nvim_set_keymap(mode, keys, command, options)
end

-- Plugins
cmd 'packadd paq-nvim'
local paq = require('paq-nvim').paq
paq {'savq/paq-nvim', opt = true}	-- paq manages itself
paq {'nvim-treesitter/nvim-treesitter'}
paq {'neovim/nvim-lspconfig'}
paq {'jseba/vim-cpp-enhanced-highlight'}
paq {'shougo/deoplete-lsp'}
paq {'shougo/deoplete.nvim', run = fn['remote#host#UpdateRemotePlugins']}
paq {'junegunn/fzf', run = fn['fzf#install']}
paq {'junegunn/fzf.vim'}
paq {'fatih/vim-go'}
paq {'morhetz/gruvbox'}
paq {'nlknguyen/PaperColor-theme'}
paq {'sainnhe/sonokai'}

g['deoplete#enable_at_startup'] = 1 -- enable deoplete at startup

-- General settings
local indent = 4
setopt('o', 'autoindent', true)
setopt('o', 'autowrite', true)
setopt('o', 'backspace', 'indent,eol,start')
setopt('o', 'backup', true)
setopt('o', 'backupdir', true)
setopt('o', 'belloff', true)
setopt('o', 'breakindent', true)
setopt('o', 'cmdheight', true)
setopt('o', 'complete', true)
setopt('o', 'completopt', true)
setopt('o', 'diffopt', true)
setopt('o', 'directory', true)
setopt('o', 'expandtab', true)
setopt('o', 'fillchars', true)
setopt('o', 'formatoptions', true)
setopt('o', 'gdefault', true)
setopt('o', 'hidden', true)
setopt('o', 'history', true)
setopt('o', 'hlsearch', true)
setopt('o', 'ignorecase', true)
setopt('o', 'incsearch', true)
setopt('o', 'linespace', true)
setopt('o', 'list', true)
setopt('o', 'listchars', true)
setopt('o', 'modeline', true)
setopt('o', 'mouse', true)
setopt('o', 'mousehide', true)
setopt('o', 'autoread', false)
setopt('o', 'joinspaces', false)
setopt('o', 'number', false)
setopt('o', 'showmatch', false)
setopt('o', 'showmode', false)
setopt('o', 'spell', false)
setopt('o', 'startofline', false)
setopt('o', 'swapfile', false)
setopt('o', 'wrap', false)
setopt('o', 'scrolljump', true)
setopt('o', 'scrolloff', true)
setopt('o', 'shiftround', true)
setopt('o', 'shiftwidth', true)
setopt('o', 'shortmess', true)
setopt('o', 'sidescroll', true)
setopt('o', 'sidescrolloff', true)
setopt('o', 'signcolumn', true)
setopt('o', 'smartcase', true)
setopt('o', 'softtabstop', true)
setopt('o', 'splitbelow', true)
setopt('o', 'splitright', true)
setopt('o', 'synmaxcol', true)
setopt('o', 'tabstop', true)
setopt('o', 'textwidth', true)
setopt('o', 'title', true)
setopt('o', 'undodir', true)
setopt('o', 'undofile', true)
setopt('o', 'updatetime', true)
setopt('o', 'virtualedit', true)
setopt('o', 'whichwrap', true)
setopt('o', 'wildcharm', true)
setopt('o', 'wildmenu', true)
setopt('o', 'wildmode', true)

